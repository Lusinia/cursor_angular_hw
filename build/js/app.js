"use strict";var shopApp=angular.module("shopApp",["ngRoute","ngAnimate"]);shopApp.config(["$routeProvider","$locationProvider",function(t,e){t.when("/",{templateUrl:"../partials/home.html",controller:"MainController"}).when("/add",{templateUrl:"../partials/add.html",controller:"AddProduct"}).when("/orders",{templateUrl:"../partials/orders.html",controller:"ShowOrders"}).when("/product/:id",{templateUrl:"../partials/product.html",controller:"ShowProduct"}).otherwise({redirectTo:"/orders"}),e.html5Mode(!0)}]),angular.module("shopApp").run(["$templateCache",function(t){t.put("../partials/add.html",'<div class={{pageStyle}}><h2 class=text-primary>Добавить книгу в список</h2><form name=form class=css-form novalidate><div class=form-group><label for=name>Title <input type=text id=name name=name class=form-control data-ng-model=newProduct.title required ng-minlength=2></label><p ng-show=form.name.$error.minlength class=help-block>Название книги слишком короткое.</p></div><div class=form-group><label for=img>Image url <input type=text id=img class=form-control name=img data-ng-model=newProduct.img required ng-pattern="/^(https?:\\/\\/)?([\\da-z\\.-]+)\\.([a-z\\.]{2,6})([\\/\\w \\.-]*)*\\/?$/"></label><p ng-show=form.img.$error.pattern class=help-block>Укажите изображение книги.</p></div><div class=form-group><label for=genre>Genre<select name=selected id=genre data-ng-model=newProduct.genre ng-options="option for option in options" required></select></label><p ng-show=form.genre.$error.required class=help-block>Какого жанра эта книга.</p></div><div class=form-group><label for=cost>Cost <input type=text id=cost class=form-control name=cost data-ng-model=newProduct.cost required ng-pattern="/^[0-9]{1,}$/"></label><p ng-show=form.cost.$error.pattern class=help-block>Введите стоимость книги.</p></div><div class=form-group><label for=desc>Description <textarea id=desc rows=5 name=desc class=form-control data-ng-model=newProduct.desc required ng-minlength=2></textarea></label><p ng-show=form.desc.$error.minlength class=help-block>Укажите описание книги.</p></div><div class=buttonWrapper><button type=submit data-ng-click=addProduct() class="btn btn-success" ng-disabled=form.$invalid>Добавить</button> <a href="/" class="btn btn-primary">На главную</a></div></form></div>'),t.put("../partials/home.html",'<div class="{{ pageStyle }}"><h2>Книги на любой вкус</h2><div class=top-page><form action="http://localhost:8080/" method=POST class=auth ng-controller=AuthController><input type=text name=login ng-model=username placeholder=Login class="form-control auth-input"> <input type=password name=password ng-model=password placeholder=Password class="form-control auth-input"> <button type=submit ng-click=register() class="btn btn-info auth-input">Register</button> <button type=button ng-click=login() class="btn btn-info auth-input">Log In</button> <button type=submit ng-click=logout() class="btn btn-info auth-input">Log Out</button></form><div class=top-page-wrapper><a href=/add class="btn btn-primary btn-lg">Добавить книгу</a> <a href=/orders data-ng-click=setOrdersNumber() class="btn btn-primary btn-lg">Мои заказы <span class="glyphicon glyphicon-flash" aria-hidden=true></span> {{orders.length}}</a><select name=sorting-list data-ng-model=sortList.type ng-options="option.value as option.name for option in typeOptions"></select></div></div><aside><ul class=list-group><li class=list-group-item data-ng-repeat="genre in genreList" ng-click=myFilter(genre.val)><span class=badge>{{genre.num}}</span> {{genre.val}}</li><li class=list-group-item ng-click=myFilter(null)><span class=badge>{{products.length}}</span>Показать все книги</li><li>Stack: Mongo Express Angular Node</li></ul></aside><ul class=list ng-show=isLoaded><li data-ng-repeat="prod in products | filter: filters | orderBy: sortList.type" data-ng-click=showProduct(prod) data-ng-model=item class="fadein products"><md-card><p class=genre>{{ prod.genre }}</p><a href="/product/{{ prod.id }}"><h3>{{ prod.title }}</h3><img src="{{ prod.img }}" width=100 class=md-card-image alt="image caption"><br></a><p class=desc>{{ prod.description.substring(0, 50) }} ...</p><div class=cost>{{prod.cost}}$</div></md-card></li></ul></div>'),t.put("../partials/orders.html",'<div class={{pageStyle}}><h2>Твои заказы</h2><ul class=orders-list><li data-ng-repeat=\'order in orders | filter: order.id | orderBy: "id"\'>№ {{ order.id }}. <span>{{ order.title }}</span> - {{ order.quantity }} pc ({{ order.cost*order.quantity}} $) <button class="btn btn-danger" data-ng-click=removeOrder($index)>Удалить</button></li></ul><div class=sum><span>Общая сумма:</span> <span class=sumInfo>{{ sum }} $</span></div><a href="/" class="btn btn-primary btn-lg">На главную</a></div>'),t.put("../partials/product.html",'<div class={{pageStyle}}><a href=#orders class="btn btn-danger btn-lg buy" data-ng-click=addOrder(item)>Купить всего за $ {{ cost }}</a><div class=product-content><h1>{{ title}}</h1><img class=img-responsive src="{{ img }}" alt=img width=300><p class=desc>{{ description }}</p><p><b>Жанр: <span>{{genre}}</span></b></p></div><a href=# ng-click=deleteProduct() class="btn btn-warning">Удалить книгу</a> <a href="/" class="btn btn-info">На главную</a></div>')}]),shopApp.factory("ordersFactory",["$location",function(t){var e=[{id:1,title:"Cat in the dark",img:"./img/cat2.jpg",desc:"Its just me",cost:"50",quantity:1}],r={};return r.getOrders=function(){return e},r.addOrder=function(r){if(e.length>0){var o=!1;e.forEach(function(t){r.title===t.title&&(o=!0,t.quantity++)}),o||e.push(r)}t.path("/")},r.defineCostForItems=function(t){t.reduce(t,function(t,e){e+=t.cost},0)},r}]),shopApp.factory("productsFactory",["$http","$location","$timeout",function(t,e,r){var o="http://localhost:8080/",n=function(){return t.get(o)},s=[],a={};return a.getJSON=function(){return n()},a.getProducts=function(){return s},a.setProducts=function(t){s=t},a.addProduct=function(n){t({method:"post",url:o,data:JSON.stringify(n),config:"Content-Type: application/json;"}).then(function(t){console.log(t),r(function(){e.path("/")},1e3)},function(t){console.log(t)})},a.deleteProduct=function(n){var s={index:n.index,productId:n.product.id};t.delete(o+"product/"+s.productId,{params:s}).then(function(t){r(function(){e.path("/")},1e3),console.log(t)})},a.findProductById=function(t){var e=void 0;return s.forEach(function(r){r.id==t&&(e=r)}),e},a}]),shopApp.factory("usersFactory",["$location","$http",function(t,e){var r="http://localhost:8080/",o=function(){return e.get(r+"/auth/quote")},n={};return n.getUsers=function(){return o},n.register=function(){return e.post(r+"/auth/register",{username:username,password:password})},n.login=function(t,o){return e.post(r+"/auth/login",{username:t,password:o})},n}]),shopApp.controller("AddProduct",["$scope","productsFactory",function(t,e){t.pageStyle="addStyle",t.options=["Детективы","Психология","Фантастика","Фентези","Сказки","Женские романы","Религия","Ужасы"],t.addProduct=function(){e.addProduct({title:t.newProduct.title,img:t.newProduct.img,description:t.newProduct.desc,genre:t.newProduct.genre,cost:+t.newProduct.cost,id:Math.random()})}}]),shopApp.controller("AuthController",["$scope","usersFactory","productsFactory","ordersFactory",function(t,e,r,o){function n(t){var e=t.data?t.data.token:null;e&&console.log("JWT:",e)}var s={username:t.username,password:t.password};t.login=function(t){console.log("user",s)},t.getQuote=function(){s.getQuote().then(n,n)}}]),shopApp.controller("MainController",["$scope","$location","$routeParams","productsFactory","ordersFactory",function(t,e,r,o,n){t.pageStyle="mainPageStyle",t.pageClass="page-style",t.products=[],t.isLoaded=!1,t.orders=[],t.genreList=[],t.filters="",t.typeOptions=[{name:"Название",value:"title"},{name:"Жанр",value:"genre"},{name:"Цена по возрастанию",value:"cost"}],t.sortList={type:t.typeOptions[0].value},t.myFilter=function(e){t.filters=null==e?"":e};var s=function(){o.getJSON().then(function(e){var r=[];e.data.forEach(function(t){var e={};e.description=t.description,e.title=t.title,e.img=t.img,e.genre=t.genre,e.cost=+t.cost,e.id=t.id,r.push(e)}),o.setProducts(r),t.products=r;var n=_.map(r,"genre"),s=function(){n.sort();for(var t={},e=null,r=0,o=0;o<n.length;o++)n[o]!=e?(r=1,t[e=n[o]]=r):(r++,t[e]=r);return t}(),a=_.map(s,function(t,e){return{num:t,val:e||null}});t.genreList=a})};t.products=s(),t.orders=n.getOrders(),t.isLoaded=!0}]),shopApp.controller("ShowOrders",["$scope","$routeParams","productsFactory","ordersFactory",function(t,e,r,o){t.pageStyle="showOrdersStyle",t.orders=[],t.sum=o.defineCostForItems(o.getOrders()),t.item={},t.selected={value:0};t.orders=o.getOrders(),t.removeOrder=function(e){t.orders[e].quantity>1?t.orders[e].quantity-=1:1===t.orders[e].quantity&&t.orders.splice(e,1)}}]),shopApp.controller("ShowProduct",["$scope","$routeParams","productsFactory","ordersFactory",function(t,e,r,o){t.pageStyle="showProductStyle",t.ProductId=e.id;var n=r.findProductById(t.ProductId);t.img=n.img,t.title=n.title,t.genre=n.genre,t.description=n.description,t.cost=n.cost,t.products=r.getProducts(),t.addOrder=function(t){o.addOrder({title:n.title,id:o.getOrders().length+1,cost:n.cost,quantity:1})},t.deleteProduct=function(){console.log(n);var e=t.products.indexOf(n);r.deleteProduct({index:e,product:n})}}]);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInV0aWxzLmpzIiwiYXBwLmpzIiwidGVtcGxhdGVzLmpzIiwib3JkZXJzLmpzIiwicHJvZHVjdHMuanMiLCJ1c2Vycy5qcyIsIkFkZFByb2R1Y3QuanMiLCJBdXRoQ29udHJvbGxlci5qcyIsIk1haW5Db250cm9sbGVyLmpzIiwiU2hvd09yZGVycy5qcyIsIlNob3dQcm9kdWN0LmpzIl0sIm5hbWVzIjpbInNob3BBcHAiLCJhbmd1bGFyIiwibW9kdWxlIiwiY29uZmlnIiwiJHJvdXRlUHJvdmlkZXIiLCIkbG9jYXRpb25Qcm92aWRlciIsIndoZW4iLCJ0ZW1wbGF0ZVVybCIsImNvbnRyb2xsZXIiLCJvdGhlcndpc2UiLCJyZWRpcmVjdFRvIiwiaHRtbDVNb2RlIiwicnVuIiwiJHRlbXBsYXRlQ2FjaGUiLCJwdXQiLCJmYWN0b3J5IiwiJGxvY2F0aW9uIiwib3JkZXJzIiwiaWQiLCJ0aXRsZSIsImltZyIsImRlc2MiLCJjb3N0IiwicXVhbnRpdHkiLCJnZXRPcmRlcnMiLCJhZGRPcmRlciIsIml0ZW0iLCJsZW5ndGgiLCJpc0NvaW5jaWRlbmNlIiwiZm9yRWFjaCIsIm9yZGVyIiwicHVzaCIsInBhdGgiLCJkZWZpbmVDb3N0Rm9ySXRlbXMiLCJyZWR1Y2UiLCJjdXJyIiwiYWxsIiwiJGh0dHAiLCIkdGltZW91dCIsIkFQSSIsInJlY2lldmVEYXRhIiwiZ2V0IiwicHJvZHVjdHMiLCJnZXRKU09OIiwiZ2V0UHJvZHVjdHMiLCJzZXRQcm9kdWN0cyIsImRhdGEiLCJhZGRQcm9kdWN0IiwibWV0aG9kIiwidXJsIiwiSlNPTiIsInN0cmluZ2lmeSIsInRoZW4iLCJyZXNwb25zZSIsImNvbnNvbGUiLCJsb2ciLCJkZWxldGVQcm9kdWN0IiwicHJvZHVjdEluZm8iLCJpbmRleCIsInByb2R1Y3RJZCIsInByb2R1Y3QiLCJkZWxldGUiLCJwYXJhbXMiLCJmaW5kUHJvZHVjdEJ5SWQiLCJmb3VuZCIsInVzZXJzIiwiZ2V0VXNlcnMiLCJyZWdpc3RlciIsInBvc3QiLCJ1c2VybmFtZSIsInBhc3N3b3JkIiwibG9naW4iLCIkc2NvcGUiLCJwcm9kdWN0c0ZhY3RvcnkiLCJwYWdlU3R5bGUiLCJvcHRpb25zIiwibmV3UHJvZHVjdCIsImRlc2NyaXB0aW9uIiwiZ2VucmUiLCJNYXRoIiwicmFuZG9tIiwidXNlcnNGYWN0b3J5Iiwib3JkZXJzRmFjdG9yeSIsImhhbmRsZVJlcXVlc3QiLCJyZXMiLCJ0b2tlbiIsInVzZXIiLCJlIiwiZ2V0UXVvdGUiLCIkcm91dGVQYXJhbXMiLCJwYWdlQ2xhc3MiLCJpc0xvYWRlZCIsImdlbnJlTGlzdCIsImZpbHRlcnMiLCJ0eXBlT3B0aW9ucyIsIm5hbWUiLCJ2YWx1ZSIsInNvcnRMaXN0IiwidHlwZSIsIm15RmlsdGVyIiwibGluayIsImNyZWF0ZUxpc3QiLCJpdGVtcyIsImxpc3QiLCJrZXkiLCJsaXN0SXRlbSIsIl8iLCJtYXAiLCJnZW5yZXMiLCJzb3J0IiwidW5pcVZhbHVlc09iamVzYyIsImN1cnJlbnQiLCJjbnQiLCJpIiwiZ2VucmVBcnJheUZyb21PYmplY3QiLCJudW0iLCJ2YWwiLCJzdW0iLCJzZWxlY3RlZCIsInJlbW92ZU9yZGVyIiwic3BsaWNlIiwiUHJvZHVjdElkIiwiY3VycmVudFByb2R1Y3QiLCJpbmRleE9mIl0sIm1hcHBpbmdzIjoiQUFHQSxhQ0hBLElBQUFBLFFBQUFDLFFBQUFDLE9BQUEsV0FBQSxVQUFBLGNBS0FGLFFBQUFHLFFBQUEsaUJBQUEsb0JBQUEsU0FBQUMsRUFBQUMsR0FFQUQsRUFHQUUsS0FBQSxLQUNBQyxZQUFBLHdCQUNBQyxXQUFBLG1CQUlBRixLQUFBLFFBQ0FDLFlBQUEsdUJBQ0FDLFdBQUEsZUFJQUYsS0FBQSxXQUNBQyxZQUFBLDBCQUNBQyxXQUFBLGVBSUFGLEtBQUEsZ0JBQ0FDLFlBQUEsMkJBQ0FDLFdBQUEsZ0JBQ0FDLFdBQUFDLFdBQUEsWUFFQUwsRUFBQU0sV0FBQSxNQ2pDQVYsUUFBQUMsT0FBQSxXQUFBVSxLQUFBLGlCQUFBLFNBQUFDLEdBQUFBLEVBQUFDLElBQUEsdUJBQUEs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QUEsRUFDQSxJQUFBaUQsRUFBQXZELE9BQUFTLEdBQUFILFVBQ0FpRCxFQUFBdkQsT0FBQXVHLE9BQUE5RixFQUFBLE9DaEJBMUIsUUFBQVEsV0FBQSxlQUFBLFNBQUEsZUFBQSxrQkFBQSxnQkFBQSxTQUFBZ0UsRUFBQWlCLEVBQUFoQixFQUFBUyxHQUNBVixFQUFBRSxVQUFBLG1CQUNBRixFQUFBaUQsVUFBQWhDLEVBQUF2RSxHQUNBLElBQUF3RyxFQUFBakQsRUFBQVYsZ0JBQUFTLEVBQUFpRCxXQUNBakQsRUFBQXBELElBQUFzRyxFQUFBdEcsSUFDQW9ELEVBQUFyRCxNQUFBdUcsRUFBQXZHLE1BQ0FxRCxFQUFBTSxNQUFBNEMsRUFBQTVDLE1BQ0FOLEVBQUFLLFlBQUE2QyxFQUFBN0MsWUFDQUwsRUFBQWxELEtBQUFvRyxFQUFBcEcsS0FDQWtELEVBQUE5QixTQUFBK0IsRUFBQTdCLGNBRUE0QixFQUFBL0MsU0FBQSxTQUFBQyxHQUNBd0QsRUFBQXpELFVBQ0FOLE1BQUF1RyxFQUFBdkcsTUFDQUQsR0FBQWdFLEVBQUExRCxZQUFBRyxPQUFBLEVBQ0FMLEtBQUFvRyxFQUFBcEcsS0FDQUMsU0FBQSxLQUlBaUQsRUFBQWhCLGNBQUEsV0FDQUYsUUFBQUMsSUFBQW1FLEdBQ0EsSUFBQWhFLEVBQUFjLEVBQUE5QixTQUFBaUYsUUFBQUQsR0FDQWpELEVBQUFqQixlQUNBRSxNQUFBQSxFQUNBRSxRQUFBOEQiLCJmaWxlIjoiYXBwLmpzIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBDcmVhdGVkIGJ5IGFsZW5rYSBvbiAxNS4wNy4xNy5cbiAqL1xuXCJ1c2Ugc3RyaWN0XCI7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbi8vICgoKSA9PiB7XG4vLyBkZWZpbmUgb3VyIGFwcGxpY2F0aW9uIGFuZCBwdWxsIGluIG5nUm91dGUgYW5kIG5nQW5pbWF0ZVxudmFyIHNob3BBcHAgPSBhbmd1bGFyLm1vZHVsZShcInNob3BBcHBcIiwgW1wibmdSb3V0ZVwiLCBcIm5nQW5pbWF0ZVwiXSk7XG5cbi8vIFJPVVRJTkcgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbi8vIHNldCBvdXIgcm91dGluZyBmb3IgdGhpcyBhcHBsaWNhdGlvblxuLy8gZWFjaCByb3V0ZSB3aWxsIHB1bGwgaW4gYSBkaWZmZXJlbnQgY29udHJvbGxlclxuc2hvcEFwcC5jb25maWcoWyckcm91dGVQcm92aWRlcicsICckbG9jYXRpb25Qcm92aWRlcicsIGZ1bmN0aW9uICgkcm91dGVQcm92aWRlciwgJGxvY2F0aW9uUHJvdmlkZXIpIHtcblxuICAgICRyb3V0ZVByb3ZpZGVyXG5cbiAgICAvLyBob21lIHBhZ2VcbiAgICAud2hlbihcIi9cIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCIuLi9wYXJ0aWFscy9ob21lLmh0bWxcIixcbiAgICAgICAgY29udHJvbGxlcjogXCJNYWluQ29udHJvbGxlclwiXG4gICAgfSlcblxuICAgIC8vIGFkZCBwYWdlXG4gICAgLndoZW4oXCIvYWRkXCIsIHtcbiAgICAgICAgdGVtcGxhdGVVcmw6IFwiLi4vcGFydGlhbHMvYWRkLmh0bWxcIixcbiAgICAgICAgY29udHJvbGxlcjogXCJBZGRQcm9kdWN0XCJcbiAgICB9KVxuXG4gICAgLy8gb3JkZXJzIHBhZ2VcbiAgICAud2hlbihcIi9vcmRlcnNcIiwge1xuICAgICAgICB0ZW1wbGF0ZVVybDogXCIuLi9wYXJ0aWFscy9vcmRlcnMuaHRtbFwiLFxuICAgICAgICBjb250cm9sbGVyOiBcIlNob3dPcmRlcnNcIlxuICAgIH0pXG5cbiAgICAvLyBwcm9kdWN0IHBhZ2VcbiAgICAud2hlbihcIi9wcm9kdWN0LzppZFwiLCB7XG4gICAgICAgIHRlbXBsYXRlVXJsOiBcIi4uL3BhcnRpYWxzL3Byb2R1Y3QuaHRtbFwiLFxuICAgICAgICBjb250cm9sbGVyOiBcIlNob3dQcm9kdWN0XCJcbiAgICB9KS5vdGhlcndpc2UoeyByZWRpcmVjdFRvOiBcIi9vcmRlcnNcIiB9KTtcblxuICAgICRsb2NhdGlvblByb3ZpZGVyLmh0bWw1TW9kZSh0cnVlKTtcbn1dKTtcbi8vXG4vLyB9KSgpOyIsImFuZ3VsYXIubW9kdWxlKCdzaG9wQXBwJykucnVuKFsnJHRlbXBsYXRlQ2FjaGUnLCBmdW5jdGlvbigkdGVtcGxhdGVDYWNoZSkgeyR0ZW1wbGF0ZUNhY2hlLnB1dCgnLi4vcGFydGlhbHMvYWRkLmh0bWwnLCc8ZGl2IGNsYXNzPXt7cGFnZVN0eWxlfX0+PGgyIGNsYXNzPXRleHQtcHJpbWFyeT5cXHUwNDE0XFx1MDQzRVxcdTA0MzFcXHUwNDMwXFx1MDQzMlxcdTA0MzhcXHUwNDQyXFx1MDQ0QyBcXHUwNDNBXFx1MDQzRFxcdTA0MzhcXHUwNDMzXFx1MDQ0MyBcXHUwNDMyIFxcdTA0NDFcXHUwNDNGXFx1MDQzOFxcdTA0NDFcXHUwNDNFXFx1MDQzQTwvaDI+PGZvcm0gbmFtZT1mb3JtIGNsYXNzPWNzcy1mb3JtIG5vdmFsaWRhdGU+PGRpdiBjbGFzcz1mb3JtLWdyb3VwPjxsYWJlbCBmb3I9bmFtZT5UaXRsZSA8aW5wdXQgdHlwZT10ZXh0IGlkPW5hbWUgbmFtZT1uYW1lIGNsYXNzPWZvcm0tY29udHJvbCBkYXRhLW5nLW1vZGVsPW5ld1Byb2R1Y3QudGl0bGUgcmVxdWlyZWQgbmctbWlubGVuZ3RoPTI+PC9sYWJlbD48cCBuZy1zaG93PWZvcm0ubmFtZS4kZXJyb3IubWlubGVuZ3RoIGNsYXNzPWhlbHAtYmxvY2s+XFx1MDQxRFxcdTA0MzBcXHUwNDM3XFx1MDQzMlxcdTA0MzBcXHUwNDNEXFx1MDQzOFxcdTA0MzUgXFx1MDQzQVxcdTA0M0RcXHUwNDM4XFx1MDQzM1xcdTA0MzggXFx1MDQ0MVxcdTA0M0JcXHUwNDM4XFx1MDQ0OFxcdTA0M0FcXHUwNDNFXFx1MDQzQyBcXHUwNDNBXFx1MDQzRVxcdTA0NDBcXHUwNDNFXFx1MDQ0MlxcdTA0M0FcXHUwNDNFXFx1MDQzNS48L3A+PC9kaXY+PGRpdiBjbGFzcz1mb3JtLWdyb3VwPjxsYWJlbCBmb3I9aW1nPkltYWdlIHVybCA8aW5wdXQgdHlwZT10ZXh0IGlkPWltZyBjbGFzcz1mb3JtLWNvbnRyb2wgbmFtZT1pbWcgZGF0YS1uZy1tb2RlbD1uZXdQcm9kdWN0LmltZyByZXF1aXJlZCBuZy1wYXR0ZXJuPVwiL14oaHR0cHM/OlxcXFwvXFxcXC8pPyhbXFxcXGRhLXpcXFxcLi1dKylcXFxcLihbYS16XFxcXC5dezIsNn0pKFtcXFxcL1xcXFx3IFxcXFwuLV0qKSpcXFxcLz8kL1wiPjwvbGFiZWw+PHAgbmctc2hvdz1mb3JtLmltZy4kZXJyb3IucGF0dGVybiBjbGFzcz1oZWxwLWJsb2NrPlxcdTA0MjNcXHUwNDNBXFx1MDQzMFxcdTA0MzZcXHUwNDM4XFx1MDQ0MlxcdTA0MzUgXFx1MDQzOFxcdTA0MzdcXHUwNDNFXFx1MDQzMVxcdTA0NDBcXHUwNDMwXFx1MDQzNlxcdTA0MzVcXHUwNDNEXFx1MDQzOFxcdTA0MzUgXFx1MDQzQVxcdTA0M0RcXHUwNDM4XFx1MDQzM1xcdTA0MzguPC9wPjwvZGl2PjxkaXYgY2xhc3M9Zm9ybS1ncm91cD48bGFiZWwgZm9yPWdlbnJlPkdlbnJlPHNlbGVjdCBuYW1lPXNlbGVjdGVkIGlkPWdlbnJlIGRhdGEtbmctbW9kZWw9bmV3UHJvZHVjdC5nZW5yZSBuZy1vcHRpb25zPVwib3B0aW9uIGZvciBvcHRpb24gaW4gb3B0aW9uc1wiIHJlcXVpcmVkPjwvc2VsZWN0PjwvbGFiZWw+PHAgbmctc2hvdz1mb3JtLmdlbnJlLiRlcnJvci5yZXF1aXJlZCBjbGFzcz1oZWxwLWJsb2NrPlxcdTA0MUFcXHUwNDMwXFx1MDQzQVxcdTA0M0VcXHUwNDMzXFx1MDQzRSBcXHUwNDM2XFx1MDQzMFxcdTA0M0RcXHUwNDQwXFx1MDQzMCBcXHUwNDREXFx1MDQ0MlxcdTA0MzAgXFx1MDQzQVxcdTA0M0RcXHUwNDM4XFx1MDQzM1xcdTA0MzAuPC9wPjwvZGl2PjxkaXYgY2xhc3M9Zm9ybS1ncm91cD48bGFiZWwgZm9yPWNvc3Q+Q29zdCA8aW5wdXQgdHlwZT10ZXh0IGlkPWNvc3QgY2xhc3M9Zm9ybS1jb250cm9sIG5hbWU9Y29zdCBkYXRhLW5nLW1vZGVsPW5ld1Byb2R1Y3QuY29zdCByZXF1aXJlZCBuZy1wYXR0ZXJuPVwiL15bMC05XXsxLH0kL1wiPjwvbGFiZWw+PHAgbmctc2hvdz1mb3JtLmNvc3QuJGVycm9yLnBhdHRlcm4gY2xhc3M9aGVscC1ibG9jaz5cXHUwNDEyXFx1MDQzMlxcdTA0MzVcXHUwNDM0XFx1MDQzOFxcdTA0NDJcXHUwNDM1IFxcdTA0NDFcXHUwNDQyXFx1MDQzRVxcdTA0MzhcXHUwNDNDXFx1MDQzRVxcdTA0NDFcXHUwNDQyXFx1MDQ0QyBcXHUwNDNBXFx1MDQzRFxcdTA0MzhcXHUwNDMzXFx1MDQzOC48L3A+PC9kaXY+PGRpdiBjbGFzcz1mb3JtLWdyb3VwPjxsYWJlbCBmb3I9ZGVzYz5EZXNjcmlwdGlvbiA8dGV4dGFyZWEgaWQ9ZGVzYyByb3dzPTUgbmFtZT1kZXNjIGNsYXNzPWZvcm0tY29udHJvbCBkYXRhLW5nLW1vZGVsPW5ld1Byb2R1Y3QuZGVzYyByZXF1aXJlZCBuZy1taW5sZW5ndGg9Mj48L3RleHRhcmVhPjwvbGFiZWw+PHAgbmctc2hvdz1mb3JtLmRlc2MuJGVycm9yLm1pbmxlbmd0aCBjbGFzcz1oZWxwLWJsb2NrPlxcdTA0MjNcXHUwNDNBXFx1MDQzMFxcdTA0MzZcXHUwNDM4XFx1MDQ0MlxcdTA0MzUgXFx1MDQzRVxcdTA0M0ZcXHUwNDM4XFx1MDQ0MVxcdTA0MzBcXHUwNDNEXFx1MDQzOFxcdTA0MzUgXFx1MDQzQVxcdTA0M0RcXHUwNDM4XFx1MDQzM1xcdTA0MzguPC9wPjwvZGl2PjxkaXYgY2xhc3M9YnV0dG9uV3JhcHBlcj48YnV0dG9uIHR5cGU9c3VibWl0IGRhdGEtbmctY2xpY2s9YWRkUHJvZHVjdCgpIGNsYXNzPVwiYnRuIGJ0bi1zdWNjZXNzXCIgbmctZGlzYWJsZWQ9Zm9ybS4kaW52YWxpZD5cXHUwNDE0XFx1MDQzRVxcdTA0MzFcXHUwNDMwXFx1MDQzMlxcdTA0MzhcXHUwNDQyXFx1MDQ0QzwvYnV0dG9uPiA8YSBocmVmPVwiL1wiIGNsYXNzPVwiYnRuIGJ0bi1wcmltYXJ5XCI+XFx1MDQxRFxcdTA0MzAgXFx1MDQzM1xcdTA0M0JcXHUwNDMwXFx1MDQzMlxcdTA0M0RcXHUwNDQzXFx1MDQ0RTwvYT48L2Rpdj48L2Zvcm0+PC9kaXY+Jyk7XG4kdGVtcGxhdGVDYWNoZS5wdXQoJy4uL3BhcnRpYWxzL2hvbWUuaHRtbCcsJzxkaXYgY2xhc3M9XCJ7eyBwYWdlU3R5bGUgfX1cIj48aDI+XFx1MDQxQVxcdTA0M0RcXHUwNDM4XFx1MDQzM1xcdTA0MzggXFx1MDQzRFxcdTA0MzAgXFx1MDQzQlxcdTA0NEVcXHUwNDMxXFx1MDQzRVxcdTA0MzkgXFx1MDQzMlxcdTA0M0FcXHUwNDQzXFx1MDQ0MTwvaDI+PGRpdiBjbGFzcz10b3AtcGFnZT48Zm9ybSBhY3Rpb249XCJodHRwOi8vbG9jYWxob3N0OjgwODAvXCIgbWV0aG9kPVBPU1QgY2xhc3M9YXV0aCBuZy1jb250cm9sbGVyPUF1dGhDb250cm9sbGVyPjxpbnB1dCB0eXBlPXRleHQgbmFtZT1sb2dpbiBuZy1tb2RlbD11c2VybmFtZSBwbGFjZWhvbGRlcj1Mb2dpbiBjbGFzcz1cImZvcm0tY29udHJvbCBhdXRoLWlucHV0XCI+IDxpbnB1dCB0eXBlPXBhc3N3b3JkIG5hbWU9cGFzc3dvcmQgbmctbW9kZWw9cGFzc3dvcmQgcGxhY2Vob2xkZXI9UGFzc3dvcmQgY2xhc3M9XCJmb3JtLWNvbnRyb2wgYXV0aC1pbnB1dFwiPiA8YnV0dG9uIHR5cGU9c3VibWl0IG5nLWNsaWNrPXJlZ2lzdGVyKCkgY2xhc3M9XCJidG4gYnRuLWluZm8gYXV0aC1pbnB1dFwiPlJlZ2lzdGVyPC9idXR0b24+IDxidXR0b24gdHlwZT1idXR0b24gbmctY2xpY2s9bG9naW4oKSBjbGFzcz1cImJ0biBidG4taW5mbyBhdXRoLWlucHV0XCI+TG9nIEluPC9idXR0b24+IDxidXR0b24gdHlwZT1zdWJtaXQgbmctY2xpY2s9bG9nb3V0KCkgY2xhc3M9XCJidG4gYnRuLWluZm8gYXV0aC1pbnB1dFwiPkxvZyBPdXQ8L2J1dHRvbj48L2Zvcm0+PGRpdiBjbGFzcz10b3AtcGFnZS13cmFwcGVyPjxhIGhyZWY9L2FkZCBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tbGdcIj5cXHUwNDE0XFx1MDQzRVxcdTA0MzFcXHUwNDMwXFx1MDQzMlxcdTA0MzhcXHUwNDQyXFx1MDQ0QyBcXHUwNDNBXFx1MDQzRFxcdTA0MzhcXHUwNDMzXFx1MDQ0MzwvYT4gPGEgaHJlZj0vb3JkZXJzIGRhdGEtbmctY2xpY2s9c2V0T3JkZXJzTnVtYmVyKCkgY2xhc3M9XCJidG4gYnRuLXByaW1hcnkgYnRuLWxnXCI+XFx1MDQxQ1xcdTA0M0VcXHUwNDM4IFxcdTA0MzdcXHUwNDMwXFx1MDQzQVxcdTA0MzBcXHUwNDM3XFx1MDQ0QiA8c3BhbiBjbGFzcz1cImdseXBoaWNvbiBnbHlwaGljb24tZmxhc2hcIiBhcmlhLWhpZGRlbj10cnVlPjwvc3Bhbj4ge3tvcmRlcnMubGVuZ3RofX08L2E+PHNlbGVjdCBuYW1lPXNvcnRpbmctbGlzdCBkYXRhLW5nLW1vZGVsPXNvcnRMaXN0LnR5cGUgbmctb3B0aW9ucz1cIm9wdGlvbi52YWx1ZSBhcyBvcHRpb24ubmFtZSBmb3Igb3B0aW9uIGluIHR5cGVPcHRpb25zXCI+PC9zZWxlY3Q+PC9kaXY+PC9kaXY+PGFzaWRlPjx1bCBjbGFzcz1saXN0LWdyb3VwPjxsaSBjbGFzcz1saXN0LWdyb3VwLWl0ZW0gZGF0YS1uZy1yZXBlYXQ9XCJnZW5yZSBpbiBnZW5yZUxpc3RcIiBuZy1jbGljaz1teUZpbHRlcihnZW5yZS52YWwpPjxzcGFuIGNsYXNzPWJhZGdlPnt7Z2VucmUubnVtfX08L3NwYW4+IHt7Z2VucmUudmFsfX08L2xpPjxsaSBjbGFzcz1saXN0LWdyb3VwLWl0ZW0gbmctY2xpY2s9bXlGaWx0ZXIobnVsbCk+PHNwYW4gY2xhc3M9YmFkZ2U+e3twcm9kdWN0cy5sZW5ndGh9fTwvc3Bhbj5cXHUwNDFGXFx1MDQzRVxcdTA0M0FcXHUwNDMwXFx1MDQzN1xcdTA0MzBcXHUwNDQyXFx1MDQ0QyBcXHUwNDMyXFx1MDQ0MVxcdTA0MzUgXFx1MDQzQVxcdTA0M0RcXHUwNDM4XFx1MDQzM1xcdTA0Mzg8L2xpPjxsaT5TdGFjazogTW9uZ28gRXhwcmVzcyBBbmd1bGFyIE5vZGU8L2xpPjwvdWw+PC9hc2lkZT48dWwgY2xhc3M9bGlzdCBuZy1zaG93PWlzTG9hZGVkPjxsaSBkYXRhLW5nLXJlcGVhdD1cInByb2QgaW4gcHJvZHVjdHMgfCBmaWx0ZXI6IGZpbHRlcnMgfCBvcmRlckJ5OiBzb3J0TGlzdC50eXBlXCIgZGF0YS1uZy1jbGljaz1zaG93UHJvZHVjdChwcm9kKSBkYXRhLW5nLW1vZGVsPWl0ZW0gY2xhc3M9XCJmYWRlaW4gcHJvZHVjdHNcIj48bWQtY2FyZD48cCBjbGFzcz1nZW5yZT57eyBwcm9kLmdlbnJlIH19PC9wPjxhIGhyZWY9XCIvcHJvZHVjdC97eyBwcm9kLmlkIH19XCI+PGgzPnt7IHByb2QudGl0bGUgfX08L2gzPjxpbWcgc3JjPVwie3sgcHJvZC5pbWcgfX1cIiB3aWR0aD0xMDAgY2xhc3M9bWQtY2FyZC1pbWFnZSBhbHQ9XCJpbWFnZSBjYXB0aW9uXCI+PGJyPjwvYT48cCBjbGFzcz1kZXNjPnt7IHByb2QuZGVzY3JpcHRpb24uc3Vic3RyaW5nKDAsIDUwKSB9fSAuLi48L3A+PGRpdiBjbGFzcz1jb3N0Pnt7cHJvZC5jb3N0fX0kPC9kaXY+PC9tZC1jYXJkPjwvbGk+PC91bD48L2Rpdj4nKTtcbiR0ZW1wbGF0ZUNhY2hlLnB1dCgnLi4vcGFydGlhbHMvb3JkZXJzLmh0bWwnLCc8ZGl2IGNsYXNzPXt7cGFnZVN0eWxlfX0+PGgyPlxcdTA0MjJcXHUwNDMyXFx1MDQzRVxcdTA0MzggXFx1MDQzN1xcdTA0MzBcXHUwNDNBXFx1MDQzMFxcdTA0MzdcXHUwNDRCPC9oMj48dWwgY2xhc3M9b3JkZXJzLWxpc3Q+PGxpIGRhdGEtbmctcmVwZWF0PVxcJ29yZGVyIGluIG9yZGVycyB8IGZpbHRlcjogb3JkZXIuaWQgfCBvcmRlckJ5OiBcImlkXCJcXCc+XFx1MjExNiB7eyBvcmRlci5pZCB9fS4gPHNwYW4+e3sgb3JkZXIudGl0bGUgfX08L3NwYW4+IC0ge3sgb3JkZXIucXVhbnRpdHkgfX0gcGMgKHt7IG9yZGVyLmNvc3Qqb3JkZXIucXVhbnRpdHl9fSAkKSA8YnV0dG9uIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXJcIiBkYXRhLW5nLWNsaWNrPXJlbW92ZU9yZGVyKCRpbmRleCk+XFx1MDQyM1xcdTA0MzRcXHUwNDMwXFx1MDQzQlxcdTA0MzhcXHUwNDQyXFx1MDQ0QzwvYnV0dG9uPjwvbGk+PC91bD48ZGl2IGNsYXNzPXN1bT48c3Bhbj5cXHUwNDFFXFx1MDQzMVxcdTA0NDlcXHUwNDMwXFx1MDQ0RiBcXHUwNDQxXFx1MDQ0M1xcdTA0M0NcXHUwNDNDXFx1MDQzMDo8L3NwYW4+IDxzcGFuIGNsYXNzPXN1bUluZm8+e3sgc3VtIH19ICQ8L3NwYW4+PC9kaXY+PGEgaHJlZj1cIi9cIiBjbGFzcz1cImJ0biBidG4tcHJpbWFyeSBidG4tbGdcIj5cXHUwNDFEXFx1MDQzMCBcXHUwNDMzXFx1MDQzQlxcdTA0MzBcXHUwNDMyXFx1MDQzRFxcdTA0NDNcXHUwNDRFPC9hPjwvZGl2PicpO1xuJHRlbXBsYXRlQ2FjaGUucHV0KCcuLi9wYXJ0aWFscy9wcm9kdWN0Lmh0bWwnLCc8ZGl2IGNsYXNzPXt7cGFnZVN0eWxlfX0+PGEgaHJlZj0jb3JkZXJzIGNsYXNzPVwiYnRuIGJ0bi1kYW5nZXIgYnRuLWxnIGJ1eVwiIGRhdGEtbmctY2xpY2s9YWRkT3JkZXIoaXRlbSk+XFx1MDQxQVxcdTA0NDNcXHUwNDNGXFx1MDQzOFxcdTA0NDJcXHUwNDRDIFxcdTA0MzJcXHUwNDQxXFx1MDQzNVxcdTA0MzNcXHUwNDNFIFxcdTA0MzdcXHUwNDMwICQge3sgY29zdCB9fTwvYT48ZGl2IGNsYXNzPXByb2R1Y3QtY29udGVudD48aDE+e3sgdGl0bGV9fTwvaDE+PGltZyBjbGFzcz1pbWctcmVzcG9uc2l2ZSBzcmM9XCJ7eyBpbWcgfX1cIiBhbHQ9aW1nIHdpZHRoPTMwMD48cCBjbGFzcz1kZXNjPnt7IGRlc2NyaXB0aW9uIH19PC9wPjxwPjxiPlxcdTA0MTZcXHUwNDMwXFx1MDQzRFxcdTA0NDA6IDxzcGFuPnt7Z2VucmV9fTwvc3Bhbj48L2I+PC9wPjwvZGl2PjxhIGhyZWY9IyBuZy1jbGljaz1kZWxldGVQcm9kdWN0KCkgY2xhc3M9XCJidG4gYnRuLXdhcm5pbmdcIj5cXHUwNDIzXFx1MDQzNFxcdTA0MzBcXHUwNDNCXFx1MDQzOFxcdTA0NDJcXHUwNDRDIFxcdTA0M0FcXHUwNDNEXFx1MDQzOFxcdTA0MzNcXHUwNDQzPC9hPiA8YSBocmVmPVwiL1wiIGNsYXNzPVwiYnRuIGJ0bi1pbmZvXCI+XFx1MDQxRFxcdTA0MzAgXFx1MDQzM1xcdTA0M0JcXHUwNDMwXFx1MDQzMlxcdTA0M0RcXHUwNDQzXFx1MDQ0RTwvYT48L2Rpdj4nKTt9XSk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgc2hvcEFwcC5mYWN0b3J5KFwib3JkZXJzRmFjdG9yeVwiLCBbXCIkbG9jYXRpb25cIiwgZnVuY3Rpb24gKCRsb2NhdGlvbikge1xuICAgICAgICB2YXIgb3JkZXJzID0gW3tcbiAgICAgICAgICAgIGlkOiAxLFxuICAgICAgICAgICAgdGl0bGU6IFwiQ2F0IGluIHRoZSBkYXJrXCIsXG4gICAgICAgICAgICBpbWc6ICcuL2ltZy9jYXQyLmpwZycsXG4gICAgICAgICAgICBkZXNjOiBcIkl0cyBqdXN0IG1lXCIsXG4gICAgICAgICAgICBjb3N0OiAnNTAnLFxuICAgICAgICAgICAgcXVhbnRpdHk6IDFcbiAgICAgICAgfV07XG4gICAgICAgIHZhciBmYWN0b3J5ID0ge307XG4gICAgICAgIGZhY3RvcnkuZ2V0T3JkZXJzID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuIG9yZGVycztcbiAgICAgICAgfTtcblxuICAgICAgICBmYWN0b3J5LmFkZE9yZGVyID0gZnVuY3Rpb24gKGl0ZW0pIHtcblxuICAgICAgICAgICAgaWYgKG9yZGVycy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgdmFyIGlzQ29pbmNpZGVuY2UgPSBmYWxzZTtcbiAgICAgICAgICAgICAgICBvcmRlcnMuZm9yRWFjaChmdW5jdGlvbiAob3JkZXIpIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKGl0ZW0udGl0bGUgPT09IG9yZGVyLnRpdGxlKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpc0NvaW5jaWRlbmNlID0gdHJ1ZTtcbiAgICAgICAgICAgICAgICAgICAgICAgIG9yZGVyLnF1YW50aXR5Kys7XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9KTtcbiAgICAgICAgICAgICAgICBpZiAoIWlzQ29pbmNpZGVuY2UpIHtcbiAgICAgICAgICAgICAgICAgICAgb3JkZXJzLnB1c2goaXRlbSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgICAgfTtcbiAgICAgICAgZmFjdG9yeS5kZWZpbmVDb3N0Rm9ySXRlbXMgPSBmdW5jdGlvbiAob3JkZXJzKSB7XG4gICAgICAgICAgICBvcmRlcnMucmVkdWNlKG9yZGVycywgZnVuY3Rpb24gKGN1cnIsIGFsbCkge1xuICAgICAgICAgICAgICAgIGFsbCArPSBjdXJyLmNvc3Q7XG4gICAgICAgICAgICB9LCAwKTtcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGZhY3Rvcnk7XG4gICAgfV0pO1xufSkoKTsiLCJcInVzZSBzdHJpY3RcIjtcblxuKGZ1bmN0aW9uICgpIHtcbiAgICAvLyBGQUNUT1JZXG4gICAgc2hvcEFwcC5mYWN0b3J5KFwicHJvZHVjdHNGYWN0b3J5XCIsIFtcIiRodHRwXCIsIFwiJGxvY2F0aW9uXCIsIFwiJHRpbWVvdXRcIiwgZnVuY3Rpb24gKCRodHRwLCAkbG9jYXRpb24sICR0aW1lb3V0KSB7XG4gICAgICAgIHZhciBBUEkgPSAnaHR0cDovL2xvY2FsaG9zdDo4MDgwLyc7XG4gICAgICAgIHZhciByZWNpZXZlRGF0YSA9IGZ1bmN0aW9uIHJlY2lldmVEYXRhKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLmdldChBUEkpO1xuICAgICAgICB9O1xuICAgICAgICB2YXIgcHJvZHVjdHMgPSBbXTtcblxuICAgICAgICB2YXIgZmFjdG9yeSA9IHt9O1xuICAgICAgICBmYWN0b3J5LmdldEpTT04gPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXR1cm4gcmVjaWV2ZURhdGEoKTtcbiAgICAgICAgfTtcbiAgICAgICAgZmFjdG9yeS5nZXRQcm9kdWN0cyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiBwcm9kdWN0cztcbiAgICAgICAgfTtcbiAgICAgICAgZmFjdG9yeS5zZXRQcm9kdWN0cyA9IGZ1bmN0aW9uIChkYXRhKSB7XG4gICAgICAgICAgICBwcm9kdWN0cyA9IGRhdGE7XG4gICAgICAgIH07XG4gICAgICAgIGZhY3RvcnkuYWRkUHJvZHVjdCA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICAkaHR0cCh7XG4gICAgICAgICAgICAgICAgbWV0aG9kOiAncG9zdCcsXG4gICAgICAgICAgICAgICAgdXJsOiBBUEksXG4gICAgICAgICAgICAgICAgZGF0YTogSlNPTi5zdHJpbmdpZnkoaXRlbSksXG4gICAgICAgICAgICAgICAgY29uZmlnOiAnQ29udGVudC1UeXBlOiBhcHBsaWNhdGlvbi9qc29uOydcbiAgICAgICAgICAgIH0pLnRoZW4oZnVuY3Rpb24gKHJlc3BvbnNlKSB7XG4gICAgICAgICAgICAgICAgY29uc29sZS5sb2cocmVzcG9uc2UpO1xuICAgICAgICAgICAgICAgICR0aW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAgICAgJGxvY2F0aW9uLnBhdGgoJy8nKTtcbiAgICAgICAgICAgICAgICB9LCAxMDAwKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChyZXNwb25zZSkge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlc3BvbnNlKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmYWN0b3J5LmRlbGV0ZVByb2R1Y3QgPSBmdW5jdGlvbiAoZGF0YSkge1xuXG4gICAgICAgICAgICB2YXIgcHJvZHVjdEluZm8gPSB7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGRhdGEuaW5kZXgsXG4gICAgICAgICAgICAgICAgcHJvZHVjdElkOiBkYXRhLnByb2R1Y3QuaWRcbiAgICAgICAgICAgIH07XG4gICAgICAgICAgICAkaHR0cC5kZWxldGUoQVBJICsgJ3Byb2R1Y3QvJyArIHByb2R1Y3RJbmZvLnByb2R1Y3RJZCwgeyBwYXJhbXM6IHByb2R1Y3RJbmZvIH0pLnRoZW4oZnVuY3Rpb24gKGRhdGEpIHtcbiAgICAgICAgICAgICAgICAkdGltZW91dChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgICRsb2NhdGlvbi5wYXRoKCcvJyk7XG4gICAgICAgICAgICAgICAgfSwgMTAwMCk7XG5cbiAgICAgICAgICAgICAgICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZhY3RvcnkuZmluZFByb2R1Y3RCeUlkID0gZnVuY3Rpb24gKGlkKSB7XG4gICAgICAgICAgICB2YXIgZm91bmQgPSB2b2lkIDA7XG4gICAgICAgICAgICBwcm9kdWN0cy5mb3JFYWNoKGZ1bmN0aW9uIChwcm9kdWN0KSB7XG4gICAgICAgICAgICAgICAgaWYgKHByb2R1Y3QuaWQgPT0gaWQpIHtcbiAgICAgICAgICAgICAgICAgICAgZm91bmQgPSBwcm9kdWN0O1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgcmV0dXJuIGZvdW5kO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZmFjdG9yeTtcbiAgICB9XSk7XG59KSgpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIENyZWF0ZWQgYnkgYWxlbmthIG9uIDE4LjA3LjE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuICAgIHNob3BBcHAuZmFjdG9yeShcInVzZXJzRmFjdG9yeVwiLCBbXCIkbG9jYXRpb25cIiwgXCIkaHR0cFwiLCBmdW5jdGlvbiAoJGxvY2F0aW9uLCAkaHR0cCkge1xuICAgICAgICB2YXIgQVBJID0gJ2h0dHA6Ly9sb2NhbGhvc3Q6ODA4MC8nO1xuICAgICAgICB2YXIgdXNlcnMgPSBmdW5jdGlvbiB1c2VycygpIHtcbiAgICAgICAgICAgIHJldHVybiAkaHR0cC5nZXQoQVBJICsgJy9hdXRoL3F1b3RlJyk7XG4gICAgICAgIH07XG5cbiAgICAgICAgdmFyIGZhY3RvcnkgPSB7fTtcbiAgICAgICAgZmFjdG9yeS5nZXRVc2VycyA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHJldHVybiB1c2VycztcbiAgICAgICAgfTtcblxuICAgICAgICBmYWN0b3J5LnJlZ2lzdGVyID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJICsgJy9hdXRoL3JlZ2lzdGVyJywge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICBmYWN0b3J5LmxvZ2luID0gZnVuY3Rpb24gKHVzZXJuYW1lLCBwYXNzd29yZCkge1xuICAgICAgICAgICAgcmV0dXJuICRodHRwLnBvc3QoQVBJICsgJy9hdXRoL2xvZ2luJywge1xuICAgICAgICAgICAgICAgIHVzZXJuYW1lOiB1c2VybmFtZSxcbiAgICAgICAgICAgICAgICBwYXNzd29yZDogcGFzc3dvcmRcbiAgICAgICAgICAgIH0pO1xuICAgICAgICB9O1xuICAgICAgICByZXR1cm4gZmFjdG9yeTtcbiAgICB9XSk7XG59KSgpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIHNob3BBcHAuY29udHJvbGxlcihcIkFkZFByb2R1Y3RcIiwgW1wiJHNjb3BlXCIsIFwicHJvZHVjdHNGYWN0b3J5XCIsIGZ1bmN0aW9uICgkc2NvcGUsIHByb2R1Y3RzRmFjdG9yeSkge1xuICAgICAgICAkc2NvcGUucGFnZVN0eWxlID0gJ2FkZFN0eWxlJztcbiAgICAgICAgJHNjb3BlLm9wdGlvbnMgPSBbXCLQlNC10YLQtdC60YLQuNCy0YtcIiwgXCLQn9GB0LjRhdC+0LvQvtCz0LjRj1wiLCBcItCk0LDQvdGC0LDRgdGC0LjQutCwXCIsIFwi0KTQtdC90YLQtdC30LhcIiwgXCLQodC60LDQt9C60LhcIiwgXCLQltC10L3RgdC60LjQtSDRgNC+0LzQsNC90YtcIiwgXCLQoNC10LvQuNCz0LjRj1wiLCBcItCj0LbQsNGB0YtcIl07XG5cbiAgICAgICAgJHNjb3BlLmFkZFByb2R1Y3QgPSBmdW5jdGlvbiAoKSB7XG5cbiAgICAgICAgICAgIHByb2R1Y3RzRmFjdG9yeS5hZGRQcm9kdWN0KHtcbiAgICAgICAgICAgICAgICB0aXRsZTogJHNjb3BlLm5ld1Byb2R1Y3QudGl0bGUsXG4gICAgICAgICAgICAgICAgaW1nOiAkc2NvcGUubmV3UHJvZHVjdC5pbWcsXG4gICAgICAgICAgICAgICAgZGVzY3JpcHRpb246ICRzY29wZS5uZXdQcm9kdWN0LmRlc2MsXG4gICAgICAgICAgICAgICAgZ2VucmU6ICRzY29wZS5uZXdQcm9kdWN0LmdlbnJlLFxuICAgICAgICAgICAgICAgIGNvc3Q6ICskc2NvcGUubmV3UHJvZHVjdC5jb3N0LFxuICAgICAgICAgICAgICAgIGlkOiBNYXRoLnJhbmRvbSgpXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XSk7XG59KSgpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4vKipcbiAqIENyZWF0ZWQgYnkgYWxlbmthIG9uIDE4LjA3LjE3LlxuICovXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gQ09OVFJPTExFUlMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBob21lIHBhZ2UgY29udHJvbGxlclxuICAgIHNob3BBcHAuY29udHJvbGxlcihcIkF1dGhDb250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcInVzZXJzRmFjdG9yeVwiLCBcInByb2R1Y3RzRmFjdG9yeVwiLCBcIm9yZGVyc0ZhY3RvcnlcIiwgZnVuY3Rpb24gKCRzY29wZSwgdXNlcnNGYWN0b3J5LCBwcm9kdWN0c0ZhY3RvcnksIG9yZGVyc0ZhY3RvcnkpIHtcbiAgICAgICAgdmFyIHVzZXIgPSB7XG4gICAgICAgICAgICB1c2VybmFtZTogJHNjb3BlLnVzZXJuYW1lLFxuICAgICAgICAgICAgcGFzc3dvcmQ6ICRzY29wZS5wYXNzd29yZFxuICAgICAgICB9O1xuXG4gICAgICAgIC8vQXV0aFxuXG4gICAgICAgIGZ1bmN0aW9uIGhhbmRsZVJlcXVlc3QocmVzKSB7XG4gICAgICAgICAgICB2YXIgdG9rZW4gPSByZXMuZGF0YSA/IHJlcy5kYXRhLnRva2VuIDogbnVsbDtcbiAgICAgICAgICAgIGlmICh0b2tlbikge1xuICAgICAgICAgICAgICAgIGNvbnNvbGUubG9nKCdKV1Q6JywgdG9rZW4pO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgLy8gc2VsZi5tZXNzYWdlID0gcmVzLmRhdGEubWVzc2FnZTtcbiAgICAgICAgfVxuICAgICAgICAkc2NvcGUubG9naW4gPSBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgLy8gZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICAgICAgY29uc29sZS5sb2coJ3VzZXInLCB1c2VyKTtcbiAgICAgICAgICAgIC8vIHVzZXJzRmFjdG9yeS5sb2dpbiggdXNlci51c2VybmFtZSwgIHVzZXIucGFzc3dvcmQpXG4gICAgICAgICAgICAvLyAgICAudGhlbihoYW5kbGVSZXF1ZXN0LCBoYW5kbGVSZXF1ZXN0KVxuICAgICAgICB9O1xuXG4gICAgICAgICRzY29wZS5nZXRRdW90ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIHVzZXIuZ2V0UXVvdGUoKS50aGVuKGhhbmRsZVJlcXVlc3QsIGhhbmRsZVJlcXVlc3QpO1xuICAgICAgICB9O1xuICAgICAgICAvLyAkc2NvcGUubG9nb3V0ID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICBhdXRoLmxvZ291dCAmJiBhdXRoLmxvZ291dCgpXG4gICAgICAgIC8vIH1cbiAgICAgICAgLy8gJHNjb3BlLmlzQXV0aGVkID0gZnVuY3Rpb24oKSB7XG4gICAgICAgIC8vICAgICByZXR1cm4gYXV0aC5pc0F1dGhlZCA/IGF1dGguaXNBdXRoZWQoKSA6IGZhbHNlXG4gICAgICAgIC8vIH1cblxuXG4gICAgICAgIC8vIHZhciBpbml0ID0gKCkgPT4ge1xuICAgICAgICAvLyAgICAgJHNjb3BlLnByb2R1Y3RzID0gY3JlYXRlTGlzdCgpO1xuICAgICAgICAvLyAgICAgJHNjb3BlLm9yZGVycyA9IG9yZGVyc0ZhY3RvcnkuZ2V0T3JkZXJzKCk7XG4gICAgICAgIC8vICAgICAkc2NvcGUuaXNMb2FkZWQgPSB0cnVlO1xuICAgICAgICAvLyB9O1xuICAgICAgICAvL1xuICAgICAgICAvLyBpbml0KCk7XG5cbiAgICB9XSk7XG59KSgpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuXG4gICAgLy8gQ09OVFJPTExFUlMgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cbiAgICAvLyBob21lIHBhZ2UgY29udHJvbGxlclxuICAgIHNob3BBcHAuY29udHJvbGxlcihcIk1haW5Db250cm9sbGVyXCIsIFtcIiRzY29wZVwiLCBcIiRsb2NhdGlvblwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcInByb2R1Y3RzRmFjdG9yeVwiLCBcIm9yZGVyc0ZhY3RvcnlcIiwgZnVuY3Rpb24gKCRzY29wZSwgJGxvY2F0aW9uLCAkcm91dGVQYXJhbXMsIHByb2R1Y3RzRmFjdG9yeSwgb3JkZXJzRmFjdG9yeSkge1xuICAgICAgICAkc2NvcGUucGFnZVN0eWxlID0gJ21haW5QYWdlU3R5bGUnO1xuICAgICAgICAkc2NvcGUucGFnZUNsYXNzID0gXCJwYWdlLXN0eWxlXCI7XG4gICAgICAgICRzY29wZS5wcm9kdWN0cyA9IFtdO1xuICAgICAgICAkc2NvcGUuaXNMb2FkZWQgPSBmYWxzZTtcbiAgICAgICAgJHNjb3BlLm9yZGVycyA9IFtdO1xuICAgICAgICAkc2NvcGUuZ2VucmVMaXN0ID0gW107XG4gICAgICAgICRzY29wZS5maWx0ZXJzID0gJyc7XG4gICAgICAgICRzY29wZS50eXBlT3B0aW9ucyA9IFt7IG5hbWU6ICfQndCw0LfQstCw0L3QuNC1JywgdmFsdWU6ICd0aXRsZScgfSwgeyBuYW1lOiAn0JbQsNC90YAnLCB2YWx1ZTogJ2dlbnJlJyB9LCB7IG5hbWU6ICfQptC10L3QsCDQv9C+INCy0L7Qt9GA0LDRgdGC0LDQvdC40Y4nLCB2YWx1ZTogJ2Nvc3QnIH1dO1xuICAgICAgICAkc2NvcGUuc29ydExpc3QgPSB7IHR5cGU6ICRzY29wZS50eXBlT3B0aW9uc1swXS52YWx1ZSB9O1xuICAgICAgICAvLyBDdXN0b20gZmlsdGVyXG4gICAgICAgICRzY29wZS5teUZpbHRlciA9IGZ1bmN0aW9uIChsaW5rKSB7XG4gICAgICAgICAgICBpZiAobGluayA9PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcnMgPSAnJztcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmZpbHRlcnMgPSBsaW5rO1xuICAgICAgICAgICAgfVxuICAgICAgICB9O1xuICAgICAgICAvLyBHZXQgSlNPTiBvZiBwcm9kdWN0cyBmcm9tIHJlc3BvbnNlIGFuZCB3b3JrIHdpdGggaXRcbiAgICAgICAgdmFyIGNyZWF0ZUxpc3QgPSBmdW5jdGlvbiBjcmVhdGVMaXN0KCkge1xuICAgICAgICAgICAgcHJvZHVjdHNGYWN0b3J5LmdldEpTT04oKS50aGVuKGZ1bmN0aW9uIChpdGVtcykge1xuXG4gICAgICAgICAgICAgICAgdmFyIGxpc3QgPSBbXTtcbiAgICAgICAgICAgICAgICBpdGVtcy5kYXRhLmZvckVhY2goZnVuY3Rpb24gKGtleSkge1xuICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdEl0ZW0gPSB7fTtcbiAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uZGVzY3JpcHRpb24gPSBrZXkuZGVzY3JpcHRpb247XG4gICAgICAgICAgICAgICAgICAgIGxpc3RJdGVtLnRpdGxlID0ga2V5LnRpdGxlO1xuICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5pbWcgPSBrZXkuaW1nO1xuICAgICAgICAgICAgICAgICAgICBsaXN0SXRlbS5nZW5yZSA9IGtleS5nZW5yZTtcbiAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uY29zdCA9ICtrZXkuY29zdDtcbiAgICAgICAgICAgICAgICAgICAgbGlzdEl0ZW0uaWQgPSBrZXkuaWQ7XG4gICAgICAgICAgICAgICAgICAgIGxpc3QucHVzaChsaXN0SXRlbSk7XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgcHJvZHVjdHNGYWN0b3J5LnNldFByb2R1Y3RzKGxpc3QpO1xuICAgICAgICAgICAgICAgICRzY29wZS5wcm9kdWN0cyA9IGxpc3Q7XG5cbiAgICAgICAgICAgICAgICB2YXIgZ2VucmVMaXN0ID0gXy5tYXAobGlzdCwgJ2dlbnJlJyk7IC8vIHRha2Ugb25seSBvbmUga2V5IGZyb20gb2JqZWN0XG4gICAgICAgICAgICAgICAgdmFyIGdlbnJlcyA9IGNvdW50KCk7IC8vIG1ha2UgYXJyYXkgZm9ybSBuby1yZXBlYXRlZCBnZW5yZXNcbiAgICAgICAgICAgICAgICB2YXIgZ2VucmVBcnJheUZyb21PYmplY3QgPSBfLm1hcChnZW5yZXMsIGZ1bmN0aW9uIChpdGVtLCBpKSB7XG4gICAgICAgICAgICAgICAgICAgIC8vcmVjb25zdHJ1Y3Qgc3RydWN0dXJlIGZvciBuZy1yZXBlYXRcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIG51bTogaXRlbSxcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhbDogaSB8fCBudWxsXG4gICAgICAgICAgICAgICAgICAgIH07XG4gICAgICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICAgICAgJHNjb3BlLmdlbnJlTGlzdCA9IGdlbnJlQXJyYXlGcm9tT2JqZWN0O1xuXG4gICAgICAgICAgICAgICAgZnVuY3Rpb24gY291bnQoKSB7XG4gICAgICAgICAgICAgICAgICAgIGdlbnJlTGlzdC5zb3J0KCk7XG4gICAgICAgICAgICAgICAgICAgIHZhciB1bmlxVmFsdWVzT2JqZXNjID0ge307XG4gICAgICAgICAgICAgICAgICAgIHZhciBjdXJyZW50ID0gbnVsbDtcbiAgICAgICAgICAgICAgICAgICAgdmFyIGNudCA9IDA7XG4gICAgICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZ2VucmVMaXN0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAoZ2VucmVMaXN0W2ldICE9IGN1cnJlbnQpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50ID0gZ2VucmVMaXN0W2ldO1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNudCA9IDE7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcVZhbHVlc09iamVzY1tjdXJyZW50XSA9IGNudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY250Kys7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdW5pcVZhbHVlc09iamVzY1tjdXJyZW50XSA9IGNudDtcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdW5pcVZhbHVlc09iamVzYztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcblxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBjcmVhdGVMaXN0KCk7XG4gICAgICAgICAgICAkc2NvcGUub3JkZXJzID0gb3JkZXJzRmFjdG9yeS5nZXRPcmRlcnMoKTtcbiAgICAgICAgICAgICRzY29wZS5pc0xvYWRlZCA9IHRydWU7XG4gICAgICAgIH07XG5cbiAgICAgICAgaW5pdCgpO1xuICAgIH1dKTtcbn0pKCk7IiwiXCJ1c2Ugc3RyaWN0XCI7XG5cbihmdW5jdGlvbiAoKSB7XG4gICAgc2hvcEFwcC5jb250cm9sbGVyKFwiU2hvd09yZGVyc1wiLCBbXCIkc2NvcGVcIiwgXCIkcm91dGVQYXJhbXNcIiwgXCJwcm9kdWN0c0ZhY3RvcnlcIiwgXCJvcmRlcnNGYWN0b3J5XCIsIGZ1bmN0aW9uICgkc2NvcGUsICRyb3V0ZVBhcmFtcywgcHJvZHVjdHNGYWN0b3J5LCBvcmRlcnNGYWN0b3J5KSB7XG4gICAgICAgICRzY29wZS5wYWdlU3R5bGUgPSAnc2hvd09yZGVyc1N0eWxlJztcbiAgICAgICAgJHNjb3BlLm9yZGVycyA9IFtdO1xuICAgICAgICAkc2NvcGUuc3VtID0gb3JkZXJzRmFjdG9yeS5kZWZpbmVDb3N0Rm9ySXRlbXMob3JkZXJzRmFjdG9yeS5nZXRPcmRlcnMoKSk7XG4gICAgICAgICRzY29wZS5pdGVtID0ge307XG4gICAgICAgICRzY29wZS5zZWxlY3RlZCA9IHsgdmFsdWU6IDAgfTtcblxuICAgICAgICB2YXIgaW5pdCA9IGZ1bmN0aW9uIGluaXQoKSB7XG4gICAgICAgICAgICAkc2NvcGUub3JkZXJzID0gb3JkZXJzRmFjdG9yeS5nZXRPcmRlcnMoKTtcbiAgICAgICAgfTtcblxuICAgICAgICBpbml0KCk7XG4gICAgICAgICRzY29wZS5yZW1vdmVPcmRlciA9IGZ1bmN0aW9uIChpdGVtKSB7XG4gICAgICAgICAgICBpZiAoJHNjb3BlLm9yZGVyc1tpdGVtXS5xdWFudGl0eSA+IDEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzW2l0ZW1dLnF1YW50aXR5IC09IDE7XG4gICAgICAgICAgICB9IGVsc2UgaWYgKCRzY29wZS5vcmRlcnNbaXRlbV0ucXVhbnRpdHkgPT09IDEpIHtcbiAgICAgICAgICAgICAgICAkc2NvcGUub3JkZXJzLnNwbGljZShpdGVtLCAxKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcbiAgICB9XSk7XG59KSgpOyIsIlwidXNlIHN0cmljdFwiO1xuXG4oZnVuY3Rpb24gKCkge1xuICAgIHNob3BBcHAuY29udHJvbGxlcihcIlNob3dQcm9kdWN0XCIsIFtcIiRzY29wZVwiLCBcIiRyb3V0ZVBhcmFtc1wiLCBcInByb2R1Y3RzRmFjdG9yeVwiLCBcIm9yZGVyc0ZhY3RvcnlcIiwgZnVuY3Rpb24gKCRzY29wZSwgJHJvdXRlUGFyYW1zLCBwcm9kdWN0c0ZhY3RvcnksIG9yZGVyc0ZhY3RvcnkpIHtcbiAgICAgICAgJHNjb3BlLnBhZ2VTdHlsZSA9ICdzaG93UHJvZHVjdFN0eWxlJztcbiAgICAgICAgJHNjb3BlLlByb2R1Y3RJZCA9ICRyb3V0ZVBhcmFtcy5pZDtcbiAgICAgICAgdmFyIGN1cnJlbnRQcm9kdWN0ID0gcHJvZHVjdHNGYWN0b3J5LmZpbmRQcm9kdWN0QnlJZCgkc2NvcGUuUHJvZHVjdElkKTtcbiAgICAgICAgJHNjb3BlLmltZyA9IGN1cnJlbnRQcm9kdWN0LmltZztcbiAgICAgICAgJHNjb3BlLnRpdGxlID0gY3VycmVudFByb2R1Y3QudGl0bGU7XG4gICAgICAgICRzY29wZS5nZW5yZSA9IGN1cnJlbnRQcm9kdWN0LmdlbnJlO1xuICAgICAgICAkc2NvcGUuZGVzY3JpcHRpb24gPSBjdXJyZW50UHJvZHVjdC5kZXNjcmlwdGlvbjtcbiAgICAgICAgJHNjb3BlLmNvc3QgPSBjdXJyZW50UHJvZHVjdC5jb3N0O1xuICAgICAgICAkc2NvcGUucHJvZHVjdHMgPSBwcm9kdWN0c0ZhY3RvcnkuZ2V0UHJvZHVjdHMoKTtcblxuICAgICAgICAkc2NvcGUuYWRkT3JkZXIgPSBmdW5jdGlvbiAoaXRlbSkge1xuICAgICAgICAgICAgb3JkZXJzRmFjdG9yeS5hZGRPcmRlcih7XG4gICAgICAgICAgICAgICAgdGl0bGU6IGN1cnJlbnRQcm9kdWN0LnRpdGxlLFxuICAgICAgICAgICAgICAgIGlkOiBvcmRlcnNGYWN0b3J5LmdldE9yZGVycygpLmxlbmd0aCArIDEsXG4gICAgICAgICAgICAgICAgY29zdDogY3VycmVudFByb2R1Y3QuY29zdCxcbiAgICAgICAgICAgICAgICBxdWFudGl0eTogMVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH07XG5cbiAgICAgICAgJHNjb3BlLmRlbGV0ZVByb2R1Y3QgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICBjb25zb2xlLmxvZyhjdXJyZW50UHJvZHVjdCk7XG4gICAgICAgICAgICB2YXIgaW5kZXggPSAkc2NvcGUucHJvZHVjdHMuaW5kZXhPZihjdXJyZW50UHJvZHVjdCk7XG4gICAgICAgICAgICBwcm9kdWN0c0ZhY3RvcnkuZGVsZXRlUHJvZHVjdCh7XG4gICAgICAgICAgICAgICAgaW5kZXg6IGluZGV4LFxuICAgICAgICAgICAgICAgIHByb2R1Y3Q6IGN1cnJlbnRQcm9kdWN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfTtcbiAgICB9XSk7XG59KSgpOyJdfQ==
